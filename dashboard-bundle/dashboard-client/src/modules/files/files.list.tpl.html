<!--
  ~ This file is part of FamilyCloud Project.
  ~
  ~     The FamilyCloud Project is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU General Public License as published by
  ~     the Free Software Foundation, either version 3 of the License, or
  ~     (at your option) any later version.
  ~
  ~     The FamilyCloud Project is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU General Public License for more details.
  ~
  ~     You should have received a copy of the GNU General Public License
  ~     along with the FamilyCloud Project.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="files section" ng-class="{'col-xs-12':!showSidebar, 'col-sm-8': showSidebar}">
    <div id="toolbar">
        <ol class="breadcrumb page-header" style="display: inline;">
            <li ng-repeat="item in breadcrumb" ng-class="{'active':$last}"><a ng-click="selectFolder(item.path)">{{item.name}}</a></li>
        </ol>
    </div>


    <div class="content">
        <div style="height: 100%;padding: 0px;border: 0px;">

            <div class="buttonBar">

                <button class="glyphicon glyphicon-list btn btn-default btn-md"
                        ng-click="selectFolder('/');"></button>


                <button ui-sref="photos:grid.filter"
                        ng-show="showPhotoGrid"
                        class="glyphicon glyphicon-th btn btn-default btn-md"></button>


                <span class="assetCount">{{assetCountLabel}} </span>

                <span class="pull-right">

                    <button
                            class="glyphicon glyphicon-trash btn btn-default btn-md"
                            tooltip="Delete selected item(s)" tooltip-placement="bottom"
                            ng-click="deletePaths()" ng-disabled="selectedPaths.length == 0"></button>

                    <button
                            class="glyphicon glyphicon-folder-close btn btn-default btn-md"
                            tooltip="Add new folder" tooltip-placement="bottom"
                            ng-click="openCreateFolder()"></button>

                    <button
                            class="glyphicon glyphicon-cloud-upload btn btn-default btn-md"
                            tooltip="Upload files" tooltip-placement="bottom"
                            ng-click="toggleUpload()"></button>
                </span>
            </div>

            <div class="content listView">

                <table class="table table-striped table-hover table-condensed" style="cursor: pointer;" >
                    <thead>
                    </thead>
                    <tbody >
                    <tr ng-repeat="item in assets | orderBy:sortPrimaryType" >
                        <td style="width: 55px;">
                            <input type="checkbox" id="folder" name="folder" value="{{item.path}}" ng-click="toggleFolder($event, item.path)">

                            <a class="glyphicon glyphicon-folder-close"
                               ng-click="selectFolder(item.path)"
                               ng-if="item['jcr:primaryType'] == 'nt:folder' || item['jcr:primaryType'] == 'sling:Folder'">

                            <a class="glyphicon glyphicon-file"
                               ng-click="selectFolder(item.path)"
                               ng-if="item['jcr:primaryType'] == 'nt:file'">
                        </td>
                        <td class="name" >
                            <a ng-click="selectFolder(item.path)"
                               ng-if="item['jcr:primaryType'] == 'nt:folder' || item['jcr:primaryType'] == 'sling:Folder'"> {{item.name}}</a>

                            <a ng-click="selectFile(item.path)"
                               ng-if="item['jcr:primaryType'] == 'nt:file'"> {{item.name}}</a>
                        </td>
                    </tr>
                    </tbody>
                </table>


<!--
                <ul style="list-style: none;">
                    <li ng-repeat="item in assets | orderBy:sortPrimaryType">
                        <div class="folderRenderer"
                             ng-if="item['jcr:primaryType'] == 'nt:folder' || item['jcr:primaryType'] == 'sling:Folder'">
                            <a class="glyphicon glyphicon-folder-close" ng-click="selectFolder(item.path)"> {{item.name}}</a>
                        </div>

                        <div class="fileRenderer well" ng-if="item['jcr:primaryType'] == 'nt:file'">

                            <div class="display:inline-block" style="float: left;">
                                <a href="#/photos/{{item['jcr:uuid']}}/details"><img
                                        ng-src="/content/dam{{item.path}}.scale.h:150.png"
                                        ng-src="/content/dam{{item.path}}.scale.h:150.png"
                                        class="list-thumbnail-sm"/></a>
                            </div>

                            <div style="display:inline-block;float: left; margin-left:20px;">
                                <span>
                                    <!-  input type="checkbox"  -> &nbsp;
                                    <a href="#/photos/{{item['jcr:uuid']}}/details"> {{item.name}}</a><br/>
                                </span>

                                <span class="date">{{item['jcr:content']['jcr:lastModified']}}</span>
                                <span> --  by: {{item['jcr:content']['jcr:lastModifiedBy']}}</span><br/>
                                <span>File Size:{{item['jcr:content'][':jcr:data']}} </span>
                            </div>

                        </div>
                    </li>
                </ul>
                -->
            </div>


        </div>
    </div>

</div>


<!-- start: Widgets Area -->
<aside id="sidebar-right" class="col-sm-4 hidden-xs" ng-show="showSidebar">

    <ul class="nav nav-tabs">
        <li class="active"><a ui-sref="files.upload">Upload</a></li>
    </ul>

    <div ui-view ></div>

</aside>
<!-- end: Widgets Area -->


<script type="text/ng-template" id="FolderNameModal">
    <div class="modal-body">
        <div class="form-group">
            Folder Name
            <input type="text" class="form-control" id="folderName" placeholder="Name" ng-model="formModel.path">
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="createFolder()">Create</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>


<script type="text/ng-template" id="DeleteConfirmationDialog">
    <div class="modal-body">
        Are you sure that you want to delete the following items:
        <ul>
            <li ng-repeat="item in items">{{item}}</li>
        </ul>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        <button class="btn btn-primary" ng-click="ok()">OK</button>
    </div>
</script>



